{"paths": {"/api/subscriptions/": {"get": {"responses": {"200": {"schema": {"type": "array", "items": {"$ref": "#/definitions/AddSubscriptionResponse"}}, "description": "List of subscriptions"}}, "parameters": [], "tags": ["subscribe"], "summary": "List subscriptions", "produces": ["application/json"]}, "post": {"responses": {"201": {"schema": {"$ref": "#/definitions/AddSubscriptionResponse"}, "description": "Subscription created", "headers": {"x-hook-secret": {"description": "The secret to use for validation of intent", "type": "uuid"}}}, "200": {"schema": {"$ref": "#/definitions/AddSubscriptionResponse"}, "description": "Subscription already exists"}, "403": {"description": "The url domain is not in accept list"}, "404": {"description": "Event not found"}, "422": {"description": "Validation error"}}, "parameters": [{"in": "body", "required": false, "name": "body", "schema": {"$ref": "#/definitions/AddSubscription"}}], "tags": ["subscribe"], "summary": "Add a subscription", "produces": ["application/json"]}}, "/api/subscriptions/{id}/activate/": {"post": {"responses": {"200": {"description": "Subscription validated"}, "404": {"description": "Not found"}, "422": {"description": "Validation error"}}, "parameters": [{"in": "header", "name": "x-hook-secret", "required": false}, {"in": "path", "name": "id", "required": true, "type": "string"}], "tags": ["subscribe"], "summary": "Validate intent of a subscription", "produces": ["application/json"]}}, "/api/publications/": {"post": {"responses": {"201": {"schema": {"$ref": "#/definitions/DispatchEvent"}, "description": "Publication created"}, "401": {"descrption": "x-hook-signature not matched"}, "404": {"description": "Event not found"}, "422": {"description": "Validation error"}}, "parameters": [{"in": "body", "required": false, "name": "body", "schema": {"$ref": "#/definitions/AddPublication"}}, {"in": "header", "name": "x-hook-signature", "required": false}], "tags": ["publish"], "summary": "Publish an event", "produces": ["application/json"]}}}, "info": {"title": "chatelet API", "version": "v1"}, "swagger": "2.0", "definitions": {"AddSubscriptionResponse": {"type": "object", "properties": {"url": {"type": "string", "format": "url"}, "event_filter": {"type": "string"}, "id": {"type": "integer", "format": "int32"}, "active": {"type": "boolean"}, "event": {"type": "string"}}, "required": ["event", "url"]}, "AddSubscription": {"type": "object", "properties": {"url": {"type": "string", "format": "url"}, "event_filter": {"type": "string"}, "event": {"type": "string"}}, "required": ["event", "url"]}, "AddPublication": {"type": "object", "properties": {"payload": {"type": "object"}, "event": {"type": "string"}}, "required": ["event", "payload"]}, "DispatchEvent": {"type": "object", "properties": {"ok": {"type": "boolean"}, "payload": {"type": "object"}, "subscription": {"type": "integer", "format": "int32"}, "event": {"type": "string"}}, "required": ["event"]}}}